- name: Ensure Frigate data dir exits
  ansible.builtin.file:
    path: /data/frigate
    state: directory
    mode: "755"

- name: Ensure service monitoring network exists
  community.docker.docker_network:
    name: 'system_default'
- name: Ensure service monitoring network exists
  community.docker.docker_network:
    name: 'auth_proxy'
- name: Ensure /opt/stacks/auth-proxy dir exists
  ansible.builtin.file:
    path: /opt/stacks/auth-proxy
    state: directory
    mode: "755"
- name: Create /opt/stacks/auth-proxy/authentik_token.secret.txt 
  ansible.builtin.copy:
    content: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64346436313930383138626162626632613463346562346163353063666563663362633466313936
          3061376633623062613065323566396638303664373635340a306661333436303033613263373030
          38633836353531313134356335666539646261656661393565313032346537376665326439303963
          3938363538623835310a613632646630306234313435393935323738393838626632666135313663
          35386262396431356162366635306438623636663066326138353535616361333666653234356435
          38653639626237633938646435633038613138613463656337396635303431343764313230363364
          326337306331376565643439383166393035
    dest: /opt/stacks/auth-proxy/authentik_token.secret.txt
    mode: "600"
    force: false

    
